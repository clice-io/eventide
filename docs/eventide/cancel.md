# libuv Cancel/Stop Behavior Matrix

This table is based on `libuv v1.52.0` (`b556c06`) on Linux.

| API                    | Object Type                     | Supports `uv_cancel` | Correct Cancel/Stop Mechanism                                                         | Does Callback Fire After Cancel/Stop?                                                                                                         |
| ---------------------- | ------------------------------- | -------------------- | ------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `uv_queue_work`        | `uv_work_t` (`uv_req_t`)        | Yes                  | `uv_cancel(req)`                                                                      | `after_work_cb` still fires; on successful cancel, `status = UV_ECANCELED`. `work_cb` does not run if cancellation succeeds before execution. |
| `uv_fs_*` (async)      | `uv_fs_t` (`uv_req_t`)          | Yes                  | `uv_cancel(req)`                                                                      | `uv_fs_cb` still fires; on successful cancel, `req->result = UV_ECANCELED`.                                                                   |
| `uv_write`             | `uv_write_t` (`uv_req_t`)       | No                   | `uv_close(stream_handle)`                                                             | `write_cb` typically still fires, usually with `UV_ECANCELED`.                                                                                |
| `uv_udp_send`          | `uv_udp_send_t` (`uv_req_t`)    | No                   | `uv_close(udp_handle)`                                                                | `send_cb` typically still fires, usually with `UV_ECANCELED`.                                                                                 |
| `uv_tcp_connect`       | `uv_connect_t` (`uv_req_t`)     | No                   | `uv_close(tcp_handle)`                                                                | `connect_cb` fires, commonly with `UV_ECANCELED`.                                                                                             |
| `uv_pipe_connect2`     | `uv_connect_t` (`uv_req_t`)     | No                   | `uv_close(pipe_handle)`                                                               | `connect_cb` fires, commonly with `UV_ECANCELED`.                                                                                             |
| `uv_read_start`        | `uv_stream_t` (`uv_handle_t`)   | N/A                  | `uv_read_stop(handle)` or `uv_close(handle)`                                          | No further `read_cb` calls after stop, except a callback already in progress.                                                                 |
| `uv_udp_recv_start`    | `uv_udp_t` (`uv_handle_t`)      | N/A                  | `uv_udp_recv_stop(handle)` or `uv_close(handle)`                                      | No further `recv_cb` calls after stop, except a callback already in progress.                                                                 |
| `uv_fs_event_start`    | `uv_fs_event_t` (`uv_handle_t`) | N/A                  | `uv_fs_event_stop(handle)` or `uv_close(handle)`                                      | No further `fs_event_cb` calls after stop, except a callback already in progress.                                                             |
| `uv_timer_start`       | `uv_timer_t` (`uv_handle_t`)    | N/A                  | `uv_timer_stop(handle)`                                                               | No further `timer_cb` calls after stop.                                                                                                       |
| `uv_idle_start`        | `uv_idle_t` (`uv_handle_t`)     | N/A                  | `uv_idle_stop(handle)`                                                                | No further `idle_cb` calls after stop.                                                                                                        |
| `uv_prepare_start`     | `uv_prepare_t` (`uv_handle_t`)  | N/A                  | `uv_prepare_stop(handle)`                                                             | No further `prepare_cb` calls after stop.                                                                                                     |
| `uv_check_start`       | `uv_check_t` (`uv_handle_t`)    | N/A                  | `uv_check_stop(handle)`                                                               | No further `check_cb` calls after stop.                                                                                                       |
| `uv_signal_start`      | `uv_signal_t` (`uv_handle_t`)   | N/A                  | `uv_signal_stop(handle)`                                                              | No further `signal_cb` calls after stop.                                                                                                      |
| `uv_listen`            | `uv_stream_t` (`uv_handle_t`)   | N/A                  | `uv_close(server_handle)`                                                             | No dedicated "stop completion callback"; no new connection callbacks after close.                                                             |
| `uv_spawn` (`exit_cb`) | `uv_process_t` (`uv_handle_t`)  | N/A                  | Typically `uv_process_kill` (terminate process) or `uv_close` (stop observing handle) | `exit_cb` fires when the child exits. `kill` does not suppress the callback.                                                                  |
| `uv_close`             | Any `uv_handle_t`               | N/A                  | `uv_close(handle, close_cb)`                                                          | `close_cb` fires asynchronously once.                                                                                                         |
| `uv_walk`              | `uv_loop_t`                     | N/A                  | No cancel semantics                                                                   | `walk_cb` is called synchronously during traversal.                                                                                           |
| `uv_stop`              | `uv_loop_t`                     | N/A                  | `uv_stop(loop)`                                                                       | Does not cancel I/O callbacks; only requests loop exit.                                                                                       |
